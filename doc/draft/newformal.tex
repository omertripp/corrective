\section{Transaction Semantics}

\begin{tabular}{rl}
	$Act = \{{\tt rd}, {\tt wr}\}$ & Read/Write actions \\
	$T$ & Set of all transaction identifiers\\
	$M$ & Memory states\\
	$Sh = M$ & Shared states\\
	$Ts : T \mapsto (Act* \times M)$ & Transaction-local states\\
	$Glob = Act*$ & Global log\\
	$Loc : T \mapsto Act*$ & Local log\\
	$ \Sigma = Sh \times Ts \times Glob \times Loc$ & States\\
\end{tabular}

Events might be {\tt start}, {\tt read}, {\tt write}, {\tt warp}, {\tt commit}, {\tt abort}, and {\tt end}. Figure \ref{fi:semantics} formalizes the concrete semantics, where $a.b$ denotes the concatenation of sequence $a$ and sequence $b$, and $p_t$ represents the sequence of actions transaction $t$ performs.

\begin{figure*}
\begin{center}
\begin{tabular}{c}
\\
$\infer{\langle t, {\tt start}, (sh, tl, g, l)\rangle \to (sh, tl[t \mapsto (p_t, sh)], g, l[t \mapsto \epsilon])}{}$\\
\\
$\infer{\langle t, {\tt read}, (sh, tl, g, l)\rangle \to (sh, tl, g, l[t \mapsto l(t).{\tt read}])}{}$\\
\\
$\infer{\langle t, {\tt write}, (sh, tl, g, l)\rangle \to (sh, tl[t \mapsto \llbracket {\tt write}\rrbracket](tl(t)), g, l[t \mapsto l(t).{\tt write}])}{}$\\
\\
$\infer{\langle t, {\tt commit}, (sh, tl, g, l)\rangle \to (\llbracket l(t) \rrbracket(sh), tl, g.l(t), l\setminus [t \mapsto l(t)])}
{\textrm{if there is no conflict}}$\\
\\
$\infer{\langle t, {\tt commit}, (sh, tl, g, l)\rangle \to \langle t, {\tt warp}, (sh, tl, g, l)\rangle}
{\textrm{if there is a conflict}}$\\
\\
$\infer{\langle t, {\tt warp}, (sh, tl, g, l)\rangle \to (sh', tl', g', l')}
{\textrm{if the warping system produces } (sh', tl', g', l')}$\\
\\
$\infer{\langle t, {\tt warp}, (sh, tl, g, l)\rangle \to \langle t, {\tt abort}, (sh, tl, g, l)\rangle}
{\textrm{if the system is unable to warp}}$\\
\\
$\infer{\langle t, {\tt abort}, (sh, tl, g, l)\rangle \to (sh, tl \setminus [tl \mapsto tl(t)], g, l \setminus [l \mapsto l(t)])}
{}$\\
\\
$\infer{\langle t, {\tt end}, (sh, tl, g, l)\rangle \to (\llbracket l(t) \rrbracket(sh), tl \setminus [t \mapsto tl(t)], g.l(t), l\setminus [t \mapsto l(t)])}
{}$\\
\end{tabular}
\caption{Concrete semantics}
\label{fi:semantics}
\end{center}
\end{figure*}
